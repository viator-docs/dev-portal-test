get:
  tags:
    - Booking services
  summary: /booking/voucher
  operationId: bookingVoucher
  description: >
    Get voucher details

    - Use this service to retrieve the voucher details of a booked item.

    - The data returned is HTML-formatted and can be wrapped in a header and/or
    footer.


    **Sample query parameters**

    - leadLastName=Simpson test&itemId=580669678


    **or** 

    -
    voucherKey=1005851866:4af44c13ecf3f1a7d3f9ef2fc00c2257e08fa42ae20f877f3039ff9b52aba24e:580669678&fullHTML=true&mobileVoucher=true
  parameters:
    - $ref: ../components/parameters/acceptLanguage.yaml
    - in: query
      name: leadLastName
      example: Simpson
      schema:
        type: string
      description: '**surname** of *this* lead traveler'
    - in: query
      name: itemId
      example: '600033670'
      schema:
        type: integer
      description: |
        Booking-reference number generated by Viator

          - **Note**: For more information, see: [Booking references](#section/Key-concepts/Booking-references)
    - in: query
      name: embeddedResources
      schema:
        type: boolean
        example: false
      description: ignore (Viator only)
    - in: query
      name: voucherKey
      schema:
        type: string
        example: >-
          3299307:93c7f36a56b18ba1068787ba7fb7988da5c8ad08db77604110141ff21498603e:600033670
      description: >
        **identifier** for the voucher

        - **note**: use <u>either</u> `voucherKey` <u>or</u> the three separate
        parameters

        - if `voucherKey` is provided as well as the other parameters, then
        `voucherKey` overrides the other paramaters

        - `voucherKey` is obtained from
        [/booking/mybookings](#operation/bookingMybookings)
        or in the response from
        [/booking/book](#operation/bookingBook) when
        you make a booking
    - in: query
      name: fullHTML
      example: true
      schema:
        type: boolean
      description: |
        **specifier**:
        - set to `true` if you wish to retrieve the full HTML-formatted voucher
        - set to `false` if you want the div fragment (optional)
    - in: query
      name: mobileVoucher
      example: true
      schema:
        type: boolean
      description: >
        **specifier**: 

        - if set to `true`, the service returns the mobile (cut down)
        HTML-formatted voucher

        - if `false` the full voucher HTML is returned (ignoring `fullHTML`)

        - default: `true` 

        - this field should only be enabled for products that have a
        `voucherOption` of `'VOUCHER_E'`

        - do not enable `mobileVouchers` for paper vouchers (`voucherOption` of
        `'VOUCHER_PAPER_ONLY'`) as no barcode is returned

        - the voucher information is available in the response from
        [/product](#operation/product),
        [/booking/book](#operation/bookingBook),
        [/booking/pastbooking](#operation/bookingPastbooking),
        [/booking/mybookings](#operation/bookingMybookings)
        (it is also displayed under the 'Redemption Info' heading in this
        service)
  responses:
    '200':
      description: Success
      content:
        application/json:
          schema:
            allOf:
              - $ref: ../components/schemas/basicErrorModel.yaml
              - type: object
                properties:
                  data:
                    description: '**HTML-formatted** voucher content'
                    type: string
          examples:
            '1':
              $ref: ../components/examples/booking-voucher-example.yaml
